---
prometheus:
  defaultNamespace: xmidt
  defaultSubsystem: authbaton
  constLabels:
    development: "true"
  handler:
    maxRequestsInFlight: 5
    timeout: 5s
    instrumentMetricHandler: true

# configures go.uber.org/zap
logging:
  level: debug
  development: true
  encoderConfig:
    messageKey: msg
    levelKey: level

health:
  disableLogging: false
  custom:
    server: development

servers:
  primary:
    address: localhost:6800
    disableHTTPKeepAlives: true
    header:
      X-Server-Name:
        - authbaton
      X-Server-Version:
        - development

  metrics:
    address: localhost:6801
    disableHTTPKeepAlives: true
    header:
      X-Server-Name:
        - authbaton
      X-Server-Version:
        - development

  health:
    address: localhost:6802
    disableHTTPKeepAlives: true
    header:
      X-Server-Name:
        - authbaton
      X-Server-Version:
        - development

##############################################################################
# Authorization Credentials
##############################################################################
authx:
  inbound:
    profiles:
      -
        # targetServers is the list of servers this bascule profile should be applied to.
        targetServers: [primary]

        # basic is a list of Basic Auth credentials intended to be used for local testing purposes.
        # WARNING! Be sure to remove this from your production config.
        basic: ["dXNlcjpwYXNz"]

        # bearer contains all the configuration needed for a JWT validator.
        bearer: 
          keys:
            Factory:
                uri: "http://localhost:6500/keys/docker"
            purpose: 0
            updateInterval: 24h

# onErrorHTTPResponse provides the option to decide which authentication type
# is requested through the 'WWW-Authenticate' HTTP response header. Note that 
# this header is returned along a 401 when an Authorization header was not included
# in an inbound HTTP request.
# (Optional). authType defaults to 'Bearer'. Supported values are "Basic" and "Bearer".
onErrorHTTPResponse:
  authType: "Basic" 